## iReader手写控件兼容性分析

### 1.1 绘制流程差异

#### 1.1.1 手写控件现有工作流程

在现有手写控件的工作流程中，在`onTouchEvent()`中接收到触摸事件时，构建出`Path`信息，在`onDraw()`方法中进行书写笔迹的绘制；总结成一句话就是：**先构建Path信息，再绘制！**

#### 1.1.2 遇到的问题

基于现有的绘制流程，在掌阅平台进行笔迹绘制时，会因为水墨屏的硬件差异导致整个绘制流程比较卡顿，严重影响用户体验；

虽然，掌阅方面现有一种通过`Path`信息来绘制的方法，但是，通过测试发现：虽然比默认的方式流畅了一些，但是距离掌阅原生的手写体验还有一定的距离；通过跟掌阅方面沟通后，确认了一些事情：

- 通过掌阅提供的绘制`Path`的方法进行绘制时，在水墨屏中是比较慢的；经仔细观察之后猜测，掌阅方面会使用这个方法来进行笔迹的还原的操作，而在实时绘制时，采用的是另外的一种方式；
- 掌阅方面建议我们采用提供给我们的Demo中的方式进行绘制，因为在水墨屏中这种方式的绘制速度是最快的；这恰恰跟我们现有的手写控件工作流程刚好相反！**掌阅手写工作流程：先绘制，再回调笔迹信息！**

### 1.2 硬件差异

水墨屏的优缺点非常明显，现将水墨屏的优缺点列举如下，方便有针对性地做出说明。

#### 1.2.1 水墨屏优点

- **功耗低 **该屏幕只有在翻页等操作时才耗点电，如果不刷新显示内容，哪怕关闭电源，显示屏上的画面仍可保留，也就是说，这一页如果没看懂，看上半天也不耗电，因此非常省电；
- **强光下可视 **电子墨水屏的黑白对比度非常高，因此在强光下依然清晰可见，它看起来就像真正的纸，没有液晶屏幕那样的反光，在光线强的地方反而看得更清楚；
- **无闪烁、无辐射、可视角度大 **传统液晶显示屏由于在不断刷新，所以会有闪烁，尽管肉眼可能无法察觉，但这一现象客观存在，这也是观看屏幕导致用眼疲劳的一大主因；但电子墨水屏由于它工作原理的先天优势，一旦屏幕刷新后就不再有变化，也大大减少了眼睛的疲劳度；
- **超薄** 仅1.2mm厚度，屏幕越薄，越能有效减少设备的厚度，使之更加轻薄。 

#### 1.2.2 水墨屏缺点

- **黑白显示为主** 虽然出现了彩色电子纸屏，但颜色尚远远达不到人们的要求；
- **不足以显示动态视频** 由于电子墨水屏的工作原理导致其刷新率极低，无法满足动态内容的展示；
- **价格贵** 由于其工艺和技术较先进，也使得屏的成本比较高昂。

基于以上优缺点分析，手写控件在智通云平台和掌阅平台支持度如下：

|                  | 智通云平台 |        掌阅平台        |
| :--------------: | :--------: | :--------------------: |
| **笔迹颜色信息** | 任意颜色值 |     只支持黑白两种     |
|   **几何图形**   |  完美支持  |   拖影严重，几不可用   |
|   **基本笔迹**   |  完美支持  | 卡顿严重，用户体验不佳 |

### 1.3 建议

水墨屏的优势在于显示静态的内容，跟纸质书观看体验几无差别；基于我们智通平台现有的应用，我觉得在阅读向和写作向的应用上，会给学生带来质一样的用户体验提升！并且水墨屏不伤眼睛，这对于小学生和中学生太适合不过啦！

基于以上个人的感受来说，与其兼容现有的手写控件，各方面体验都比较差的前提下，有必要在掌阅平台，基于掌阅方面提供的`API`重新开发一款手写控件，专门用于在掌阅中的智通云平台使用，以达到纸质版书写的良好体验！