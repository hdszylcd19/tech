> 参考资料：
>
> [句柄是什么？](https://www.zhihu.com/question/27656256)

### 回答1

句柄就是个数字，一般和当前系统下的整数的位数一样，比如32bit系统下就是4个字节。这个数字是一个对象的唯一标示，和对象一一对应。
	这个对象可以是一个块内存，一个资源，或者一个服务的context（如 socket，thread）等等。
	这个数字的来源可以有很多中，只要能保证和它代表的对象保持唯一对应就可以，比如可以用内存地址，也可以用句柄表的序号，或者干脆用一个自增ID，再或者用以上的值去异或一个常数。

### 回答2

最早的windows开发书籍，handle是被翻译成“把手”的。虽然不好听，但是个人认为相当传神。

1.虽然你握住的只是把手，却能拉动整扇门，而且你根本不用在意那门长什么样子

2.一扇门如果有多个把手，被不同的人（进程）握住，门往哪儿走就不好说了

### 回答3

我从Stanford Programming Paradigm这个在线课程看来的思路。网易公开课上也有。

简单说，Handle就是指针的指针。

在c语言里面，假如你通过malloc申请一段内存空间，heap给你一个指针直接指到你可用内存的起始位置。在你释放之前操作系统无法将这段内存移动。

至于为啥要移动，因为你在程序各处调用大小不一的malloc会产生内存碎片。碎片多了总之不好，最好把碎片移到一块，这样就又有大块的内存空间可以malloc了。这个过程叫defragmentation。跟windows上硬盘碎片整理一样。

malloc直接给你指针的话就不方便heap管理内存。因为只要你不free，它就不敢动那块内存。但是假如给你指针的指针，增加一次跳转。动态内存管理内部维护一个表，第一次对指针dereference进入这个表，再来一次才到你可用的内存块。这样动态内存管理就可以把真正的那段内存定期合并起来，然后只要调整那个表指向新的地址。

 

 

 

 

 

 

 

 